generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Document {
  id Int @id @default(autoincrement())
  title String
  rawText String
  summary String?
  tags String[]
  createdAt DateTime @default(now())
  nodes Node[]
  embedding  Unsupported("vector(384)")?
}

model Node {
  id Int @id @default(autoincrement())
  document Document @relation(fields: [documentId], references: [id])
  documentId Int
  label String
  summary String
  importance Float?
  embedding Unsupported("vector(384)")?
  edgesFrom Edge[] @relation("EdgeFrom")
  edgesTo Edge[] @relation("EdgeTo")
}

model Edge {
  id Int @id @default(autoincrement())
  fromNode Node @relation("EdgeFrom", fields: [fromNodeId], references: [id])
  fromNodeId Int
  toNode Node @relation("EdgeTo", fields: [toNodeId], references: [id])
  toNodeId Int
  relation String?
  strength Float?
}